/*! Hammer.JS - v1.0.0rc1 - 2013-02-13
 * http://eightmedia.github.com/hammer.js
 *
 * Copyright (c) 2013 Jorik Tangelder <j.tangelder@gmail.com>;
 * Licensed under the MIT license */

(function(t){"use strict";function e(){if(!n.READY){n.event.determineEventTypes();for(var t in n.gestures)n.gestures.hasOwnProperty(t)&&n.gesture.register(n.gestures[t]);n.event.onTouch(document,n.EVENT_MOVE,n.gesture.detect),n.event.onTouch(document,n.EVENT_END,n.gesture.endDetect),n.READY=!0}}var n=function(t,e){return new n.Instance(t,e||{})};n.defaults={stop_browser_behavior:{userSelect:"none",touchCallout:"none",touchAction:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},n.HAS_POINTEREVENTS=navigator.msPointerEnabled,n.HAS_TOUCHEVENTS="ontouchstart"in t,n.EVENT_TYPES={},n.DIRECTION_DOWN="down",n.DIRECTION_LEFT="left",n.DIRECTION_UP="up",n.DIRECTION_RIGHT="right",n.EVENT_START="start",n.EVENT_MOVE="move",n.EVENT_END="end",n.plugins={},n.READY=!1,n.Instance=function(t,r){var i=this;return e(),this.element=t,this.options=n.utils.extend(n.utils.extend({},n.defaults),r||{}),this.options.stop_browser_behavior&&n.utils.stopDefaultBrowserBehavior(this),n.event.onTouch(t,n.EVENT_START,function(t){return n.gesture.startDetect(i,t)}),this},n.Instance.prototype={on:function(t,e){t=t.split(" ");for(var n=0;t.length>n;n++)this.element.addEventListener(t[n],e,!1);return this},off:function(t,e){t=t.split(" ");for(var n=0;t.length>n;n++)this.element.removeEventListener(t[n],e,!1);return this},trigger:function(t,e){var n=document.createEvent("Event");return n.initEvent(t,!0,!0),n.gesture=e,this.element.dispatchEvent(n)}};var r={},i=!1;n.event={bindDom:function(t,e,n){e=e.split(" ");for(var r=0;e.length>r;r++)t.addEventListener(e[r],n,!1)},onTouch:function(t,e,s){function a(i){e===n.EVENT_END?i=r:r=i,s.call(n.gesture,o.collectEventData(t,e,i))}var o=this;n.HAS_TOUCHEVENTS&&!n.HAS_POINTEREVENTS?this.bindDom(t,n.EVENT_TYPES[e],a):this.bindDom(t,n.EVENT_TYPES[e],function(t){!t.type.match(/down/i)||1!==t.which&&t.pointerType!=t.MSPOINTER_TYPE_TOUCH||(i=!0),i?(n.HAS_POINTEREVENTS&&e!=n.EVENT_END&&n.PointerEvent.updatePointer(e,t),a.apply(this,arguments),n.HAS_POINTEREVENTS&&e==n.EVENT_END&&n.PointerEvent.updatePointer(e,t)):n.PointerEvent.reset(),t.type.match(/up|cancel/i)&&(i=!1)})},determineEventTypes:function(){var t;t=n.HAS_POINTEREVENTS?["MSPointerDown","MSPointerMove","MSPointerUp MSPointerCancel"]:n.HAS_TOUCHEVENTS?["touchstart","touchmove","touchend touchcancel"]:["mousedown","mousemove","mouseup"],n.EVENT_TYPES[n.EVENT_START]=t[0],n.EVENT_TYPES[n.EVENT_MOVE]=t[1],n.EVENT_TYPES[n.EVENT_END]=t[2]},getTouchList:function(t){return n.HAS_POINTEREVENTS?n.PointerEvent.getPointers():n.HAS_TOUCHEVENTS?t.touches:[{identifier:1,pageX:t.pageX,pageY:t.pageY,target:t.target}]},collectEventData:function(t,e,r){var i=this.getTouchList(r,e);return{center:n.utils.getCenter(i),timestamp:r.timestamp||(new Date).getTime(),target:r.target,touches:i,eventType:e,srcEvent:r,preventDefault:function(){return this.srcEvent.preventDefault()}}}},n.PointerEvent={pointers:{},getPointers:function(){var t=this.pointers,e=[];return Object.keys(t).sort().forEach(function(n){e.push(t[n])}),e},updatePointer:function(t,e){t==n.EVENT_END?delete this.pointers[e.pointerId]:this.pointers[e.pointerId]=e},reset:function(){this.pointers={}}};var s=Math.PI;n.utils={extend:function(t,e,n){n=n||0;for(var r in e)e.hasOwnProperty(r)&&(t[r]=n&&"object"==typeof e[r]?this.extend({},e[r],n-1):e[r]);return t},getCenter:function(t){for(var e=[],n=[],r=0,i=t.length;i>r;r++)e.push(t[r].pageX),n.push(t[r].pageY);return{pageX:(Math.min.apply(Math,e)+Math.max.apply(Math,e))/2,pageY:(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2}},getVelocity:function(t,e,n){return{x:Math.abs(e/t)||0,y:Math.abs(n/t)||0}},getAngle:function(t,e){var n=e.pageY-t.pageY,r=e.pageX-t.pageX;return 180*Math.atan2(n,r)/s},getDirection:function(t,e){var r=Math.abs(t.pageX-e.pageX),i=Math.abs(t.pageY-e.pageY);return r>=i?t.pageX-e.pageX>0?n.DIRECTION_LEFT:n.DIRECTION_RIGHT:t.pageY-e.pageY>0?n.DIRECTION_UP:n.DIRECTION_DOWN},getDistance:function(t,e){var n=e.pageX-t.pageX,r=e.pageY-t.pageY;return Math.sqrt(n*n+r*r)},getScale:function(t,e){return t.length>=2&&e.length>=2?this.getDistance(e[0],e[1])/this.getDistance(t[0],t[1]):1},getRotation:function(t,e){return t.length>=2&&e.length>=2?this.getAngle(e[1],e[0])-this.getAngle(t[1],t[0]):0},stopDefaultBrowserBehavior:function(t){var e,n=["webkit","khtml","moz","ms","o",""],r=t.options.stop_browser_behavior;if(r){for(var i=0;n.length>i;i++)for(var s in r)r.hasOwnProperty(s)&&(e=s,n[i]&&(e=n[i]+e.substring(0,1).toUpperCase()+e.substring(1)),t.element.style[e]=r[s]);"none"==r.userSelect&&(t.element.onselectstart=function(){return!1})}}},n.gesture={gestures:[],current:null,previous:null,startDetect:function(t,e){return this.current?undefined:(this.current={inst:t,startEvent:n.utils.extend({},e),lastEvent:!1,name:""},this.current.startEvent.vertical_dragstart_correction=0,this.current.startEvent.horizontal_dragstart_correction=0,this.detect(e))},detect:function(t){if(this.current){for(var e=this.extendEventData(t),n=this.current.inst.options,r=0,i=this.gestures.length;i>r;r++){var s=this.gestures[r];if(n[s.name]!==!1&&s.handler.call(s,e,this.current.inst)===!1){this.stop();break}}this.current.lastEvent=e}},endDetect:function(t){this.detect(t),this.stop()},stop:function(){this.previous=n.utils.extend({},this.current),this.current=null},extendEventData:function(t){var e=this.current.startEvent;e&&t.touches.length!=e.touches.length&&(e.touches=n.utils.extend({},t.touches,1));var r=t.timestamp-e.timestamp,i=t.center.pageX-e.center.pageX+e.horizontal_dragstart_correction,s=t.center.pageY-e.center.pageY+e.vertical_dragstart_correction,a=n.utils.getVelocity(r,i,s);return n.utils.extend(t,{deltaTime:r,deltaX:i,deltaY:s,velocityX:a.x,velocityY:a.y,distance:n.utils.getDistance(e.center,t.center),angle:n.utils.getAngle(e.center,t.center),direction:n.utils.getDirection(e.center,t.center),scale:n.utils.getScale(e.touches,t.touches),rotation:n.utils.getRotation(e.touches,t.touches),startEvent:e}),t},register:function(t){var e=t.defaults||{};return e[t.name]===undefined&&(e[t.name]=!0),n.utils.extend(n.defaults,e),t.index=t.index||1e3,this.gestures.push(t),this.gestures.sort(function(t,e){return t.index<e.index?-1:t.index>e.index?1:0}),this.gestures}},n.gestures=n.gestures||{},n.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:3},timer:null,handler:function(t,e){switch(t.eventType){case n.EVENT_START:clearTimeout(this.timer),n.gesture.current.name=this.name,this.timer=setTimeout(function(){"hold"==n.gesture.current.name&&e.trigger("hold",t)},e.options.hold_timeout);break;case n.EVENT_MOVE:t.distance>e.options.hold_treshold&&clearTimeout(this.timer);break;case n.EVENT_END:clearTimeout(this.timer)}}},n.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,doubletap_distance:20,doubletap_interval:300},handler:function(t,e){if(t.eventType==n.EVENT_END){var r=n.gesture.previous;if(t.deltaTime>e.options.tap_max_touchtime||t.distance>e.options.tap_max_distance)return;n.gesture.current.name=r&&"tap"==r.name&&t.timestamp-r.lastEvent.timestamp<e.options.doubletap_interval&&t.distance<e.options.doubletap_distance?"doubletap":"tap",e.trigger(n.gesture.current.name,t)}}},n.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1},handler:function(t,e){if(!(e.options.drag_max_touches>0&&t.touches.length>e.options.drag_max_touches)&&t.eventType==n.EVENT_MOVE){if(t.distance<e.options.drag_min_distance&&n.gesture.current.name!=this.name)return;n.gesture.current.name!=this.name?t.direction==n.DIRECTION_UP||t.direction==n.DIRECTION_DOWN?(n.gesture.current.startEvent.vertical_dragstart_correction=0>t.deltaY?e.options.drag_min_distance:-e.options.drag_min_distance,t.deltaY+=n.gesture.current.startEvent.vertical_dragstart_correction):(n.gesture.current.startEvent.horizontal_dragstart_correction=0>t.deltaX?e.options.drag_min_distance:-e.options.drag_min_distance,t.deltaX+=n.gesture.current.startEvent.horizontal_dragstart_correction):e.options.drag_lock_to_axis&&n.gesture.current.lastEvent.direction!==t.direction&&(t.direction=n.gesture.current.lastEvent.direction==n.DIRECTION_UP||n.gesture.current.lastEvent.direction==n.DIRECTION_DOWN?0>t.deltaY?n.DIRECTION_UP:n.DIRECTION_DOWN:0>t.deltaX?n.DIRECTION_LEFT:n.DIRECTION_RIGHT),n.gesture.current.name=this.name,e.trigger(this.name,t),e.trigger(this.name+t.direction,t),(e.options.drag_block_vertical&&(t.direction==n.DIRECTION_UP||t.direction==n.DIRECTION_DOWN)||e.options.drag_block_horizontal&&(t.direction==n.DIRECTION_LEFT||t.direction==n.DIRECTION_RIGHT))&&t.preventDefault()}}},n.gestures.Swipe={name:"swipe",index:51,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(t,e){if(t.eventType==n.EVENT_END){if(e.options.swipe_max_touches>0&&t.touches.length>e.options.swipe_max_touches)return;(t.velocityX>e.options.swipe_velocity||t.velocityY>e.options.swipe_velocity)&&(e.trigger(this.name,t),e.trigger(this.name+t.direction,t))}}},n.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},handler:function(t,e){if(e.options.transform_always_block&&t.preventDefault(),t.eventType==n.EVENT_MOVE&&2==t.touches.length){var r=Math.abs(1-t.scale),i=Math.abs(t.rotation);if(e.options.transform_min_scale>r&&e.options.transform_min_rotation>i)return;n.gesture.current.name=this.name,e.trigger(this.name,t),i>e.options.transform_min_rotation&&e.trigger("rotate",t),r>e.options.transform_min_scale&&(e.trigger("pinch",t),e.trigger("pinch"+(1>t.scale?"in":"out"),t))}}},n.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1},handler:function(t,e){e.options.prevent_default&&t.preventDefault(),t.eventType==n.EVENT_START&&e.trigger(this.name,t)}},n.gestures.Release={name:"release",index:1/0,handler:function(t,e){t.eventType==n.EVENT_END&&e.trigger(this.name,t)}},t.Hammer=n,"function"==typeof t.define&&t.define.amd&&t.define("hammer",[],function(){return n})})(window);